import { renderFatalError } from '@shopify/cli-kit/node/ui';
import { outputContent, outputToken } from '@shopify/cli-kit/node/output';
import { hydrogenStorefrontsUrl } from './admin-urls.js';
import { parseGid } from './gid.js';

function renderMissingStorefront({
  session,
  storefront,
  cliCommand
}) {
  renderFatalError({
    name: "NoStorefrontError",
    type: 0,
    message: outputContent`${outputToken.errorText(
      "Couldn\u2019t find Hydrogen storefront."
    )}`.value,
    skipOclifErrorHandling: true,
    tryMessage: outputContent`Couldnâ€™t find ${storefront.title} (ID: ${parseGid(
      storefront.id
    )}) on ${session.storeFqdn}. Check that the storefront exists and run ${outputToken.genericShellCommand(
      `${cliCommand} link`
    )} to link this project to it.\n\n${outputToken.link(
      "Hydrogen Storefronts Admin",
      hydrogenStorefrontsUrl(session)
    )}`.value
  });
}
function renderMissingLink({ session, cliCommand }) {
  renderFatalError({
    name: "NoLinkedStorefrontError",
    type: 0,
    message: `No linked Hydrogen storefront on ${session.storeFqdn}`,
    skipOclifErrorHandling: true,
    tryMessage: [
      "To pull environment variables or to deploy to Oxygen, link this project to a Hydrogen storefront. To select a storefront to link, run",
      { command: `${cliCommand} link` }
    ]
  });
}

export { renderMissingLink, renderMissingStorefront };
