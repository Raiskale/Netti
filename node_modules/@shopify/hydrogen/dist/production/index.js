import { createStorefrontClient, SHOPIFY_STOREFRONT_ID_HEADER, getShopifyCookies, SHOPIFY_Y, SHOPIFY_STOREFRONT_Y_HEADER, SHOPIFY_S, SHOPIFY_STOREFRONT_S_HEADER, flattenConnection, ShopPayButton } from '@shopify/hydrogen-react';
export { AnalyticsEventName, AnalyticsPageType, ExternalVideo, IMAGE_FRAGMENT, Image, MediaFile, ModelViewer, Money, ShopifySalesChannel, Video, flattenConnection, getClientBrowserParameters, getShopifyCookies, parseGid, parseMetafield, sendShopifyAnalytics, storefrontApiCustomScalars, useLoadScript, useMoney, useShopifyCookies } from '@shopify/hydrogen-react';
import { redirect } from '@remix-run/server-runtime';
import { lazy, createContext, forwardRef, useMemo, createElement, Suspense, Fragment, useRef, useEffect, useContext } from 'react';
import { useMatches, useLocation, useNavigation, Link, useNavigate, useFetcher, useFetchers } from '@remix-run/react';
import { jsx, jsxs, Fragment as Fragment$1 } from 'react/jsx-runtime';
import jr from 'content-security-policy-builder';

function Qe(e){let t=Array.isArray(e)?e:[e],r="";for(let n of t)n!=null&&(typeof n=="object"?r+=JSON.stringify(n):r+=n.toString());return encodeURIComponent(r)}var G="public",It="private",ae="no-store",Ge={maxAge:"max-age",staleWhileRevalidate:"stale-while-revalidate",sMaxAge:"s-maxage",staleIfError:"stale-if-error"};function _(e){let t=[];return Object.keys(e).forEach(r=>{r==="mode"?t.push(e[r]):Ge[r]&&t.push(`${Ge[r]}=${e[r]}`);}),t.join(", ")}function oe(){return {mode:ae}}function se(e){if(e?.mode&&e?.mode!==G&&e?.mode!==It)throw Error("'mode' must be either 'public' or 'private'")}function D(e){return se(e),{mode:G,maxAge:1,staleWhileRevalidate:9,...e}}function ie(e){return se(e),{mode:G,maxAge:3600,staleWhileRevalidate:82800,...e}}function E(e){return se(e),{mode:G,maxAge:1,staleWhileRevalidate:86399,...e}}function ce(e){return e}function P(e){return String(e).includes("__proto__")?JSON.parse(e,Tt):JSON.parse(e)}function Tt(e,t){if(e!=="__proto__")return t}function V(e,t){return e&&t?{...e,...t}:e||E()}function ue(e){return _(V(e))}async function xt(e,t){if(!e)return;let r=await e.match(t);if(!r){return}return r}async function At(e,t,r,n){if(!e)return;let a=V(n),s=ue(V(a,{maxAge:(a.maxAge||0)+(a.staleWhileRevalidate||0)})),o=ue(V(a));r.headers.set("cache-control",s),r.headers.set("real-cache-control",o),r.headers.set("cache-put-date",new Date().toUTCString()),await e.put(t,r);}async function wt(e,t){e&&await e.delete(t);}function Ot(e,t){let r=e.headers.get("real-cache-control"),n=0;if(r){let s=r.match(/max-age=(\d*)/);s&&s.length>1&&(n=parseFloat(s[1]));}return [(new Date().valueOf()-new Date(t).valueOf())/1e3,n]}function Pt(e,t){let r=t.headers.get("cache-put-date");if(!r)return !1;let[n,a]=Ot(t,r),s=n>a;return s}var B={get:xt,set:At,delete:wt,generateDefaultCacheControlHeader:ue,isStale:Pt};function pe(e){return `https://shopify.dev/?${e}`}function bt(e){return e||E()}async function Ve(e,t){if(!e)return;let r=pe(t),n=new Request(r),a=await B.get(e,n);if(!a)return;let s=await a.text();try{return [P(s),a]}catch{return [s,a]}}async function de(e,t,r,n){if(!e)return;let a=pe(t),s=new Request(a),o=new Response(JSON.stringify(r));await B.set(e,s,o,bt(n));}function Be(e,t){return B.isStale(new Request(pe(e)),t)}function Dt(e,t){return [e,{status:t.status,statusText:t.statusText,headers:Array.from(t.headers.entries())}]}function je([e,t]){return [e,new Response(e,t)]}var We=e=>!e?.errors,le=new Set;async function ye(e,t,{strategy:r=D(),cacheInstance:n,shouldCacheResult:a=()=>!0,waitUntil:s,debugInfo:o}){let u=Qe([...typeof e=="string"?[e]:e]),p=void 0;if(!n||!r||r.mode===ae){let f=await t();return f}let d=await Ve(n,u);if(d){let[f,l]=d,h=Be(u,l)?"STALE":"HIT";if(!le.has(u)&&h==="STALE"){le.add(u);let g=Promise.resolve().then(async()=>{let y=Date.now();try{let m=await t();a(m)&&(await de(n,u,m,r),p?.("PUT",y));}catch(m){m.message&&(m.message="SWR in sub-request failed: "+m.message),console.error(m);}finally{le.delete(u);}});s?.(g);}return f}let c=await t();if(a(c)){let f=Promise.resolve().then(async()=>{await de(n,u,c,r);});s?.(f);}return c}async function Ke(e,t,{cacheInstance:r,cache:n,cacheKey:a=[e,t],shouldCacheResponse:s=()=>!0,waitUntil:o,returnType:i="json",debugInfo:u}={}){return !n&&(!t.method||t.method==="GET")&&(n=D()),ye(a,async()=>{let p=await fetch(e,t),d;try{d=await p[i]();}catch{try{d=await p.text();}catch{throw new Error(`Storefront API response code: ${p.status} (Request Id: ${p.headers.get("x-request-id")})`)}}return Dt(d,p)},{cacheInstance:r,waitUntil:o,strategy:n??null,debugInfo:u,shouldCacheResult:p=>s(...je(p))}).then(je)}var fe="Custom-Storefront-Request-Group-ID",ge="X-Shopify-Storefront-Access-Token",me="X-SDK-Variant",he="X-SDK-Variant-Source",Ce="X-SDK-Version";function ze(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`weak-${Math.random().toString(16).substring(2)}`}var N="2023.10.4";function U(e){return e.replace(/\s*#.*$/gm,"").replace(/\s+/gm," ").trim()}var Et=/(^|}\s)query[\s({]/im,Ut=/(^|}\s)mutation[\s({]/im;function j(e,t){if(!Et.test(e))throw new Error(`[h2:error:${t}] Can only execute queries`)}function W(e,t){if(!Ut.test(e))throw new Error(`[h2:error:${t}] Can only execute mutations`)}function L({response:e,errors:t,type:r,query:n,queryVariables:a,ErrorConstructor:s=Error,client:o="storefront"}){let i=e.headers.get("x-request-id"),u=(typeof t=="string"?t:t?.map?.(p=>p.message).join(`
`))||`API response error: ${e.status}`;throw new s(`[h2:error:${o}.${r}] `+u+(i?` - Request ID: ${i}`:""),{cause:JSON.stringify({errors:t,requestId:i})})}var Xe=class extends Error{},kt=e=>e instanceof Xe,qt={language:"EN",country:"US"};function Nn(e){let {storefrontHeaders:t,cache:r,waitUntil:n,i18n:a,storefrontId:s,...o}=e,{getPublicTokenHeaders:u,getPrivateTokenHeaders:p,getStorefrontApiUrl:d,getShopifyDomain:c}=createStorefrontClient(o),l=(o.privateStorefrontToken?p:u)({contentType:"json",buyerIp:t?.buyerIp||""});if(l[fe]=t?.requestGroupId||ze(),s&&(l[SHOPIFY_STOREFRONT_ID_HEADER]=s),(l["user-agent"]=`Hydrogen ${N}`),t&&t.cookie){let y=getShopifyCookies(t.cookie??"");y[SHOPIFY_Y]&&(l[SHOPIFY_STOREFRONT_Y_HEADER]=y[SHOPIFY_Y]),y[SHOPIFY_S]&&(l[SHOPIFY_STOREFRONT_S_HEADER]=y[SHOPIFY_S]);}let h=JSON.stringify({"content-type":l["content-type"],"user-agent":l["user-agent"],[me]:l[me],[he]:l[he],[Ce]:l[Ce],[ge]:l[ge]});async function g({query:y,mutation:m,variables:C,cache:A,headers:I=[],storefrontApiVersion:M}){let te=I instanceof Headers?Object.fromEntries(I.entries()):Array.isArray(I)?Object.fromEntries(I):I;y=y??m;let O={...C};a&&(!C?.country&&/\$country/.test(y)&&(O.country=a.country),!C?.language&&/\$language/.test(y)&&(O.language=a.language));let v=d({storefrontApiVersion:M}),H=JSON.stringify({query:y,variables:O}),Q={method:"POST",headers:{...l,...te},body:H},St=[v,Q.method,h,Q.body],[re,Fe]=await Ke(v,Q,{cacheInstance:m?void 0:r,cache:A||E(),cacheKey:St,shouldCacheResponse:We,waitUntil:n,debugInfo:{graphql:H,requestId:Q.headers[fe],purpose:t?.purpose}}),$e={response:Fe,type:m?"mutation":"query",query:y,queryVariables:O,errors:void 0};if(!Fe.ok){let ne;try{ne=P(re);}catch{ne=[{message:re}];}L({...$e,errors:ne});}let{data:Rt,errors:He}=re;return He?.length&&L({...$e,errors:He,ErrorConstructor:Xe}),Rt}return {storefront:{query:(y,m)=>{y=U(y),j(y,"storefront.query");let C=g({...m,query:y});return C.catch(()=>{}),C},mutate:(y,m)=>{y=U(y),W(y,"storefront.mutate");let C=g({...m,mutation:y});return C.catch(()=>{}),C},cache:r,CacheNone:oe,CacheLong:ie,CacheShort:D,CacheCustom:ce,generateCacheControlHeader:_,getPublicTokenHeaders:u,getPrivateTokenHeaders:p,getShopifyDomain:c,getApiUrl:d,isApiError:kt,i18n:a??qt}}}function Ze(e,t){let r=e.headers?.get?.(t)??e.headers?.[t];return typeof r=="string"?r:null}function et(e){return e?{requestId:Ze(e,"request-id"),purpose:Ze(e,"purpose")}:{}}function Qn({cache:e,waitUntil:t,request:r}){return function(a,s,o){return ye(a,o,{strategy:s,cacheInstance:e,waitUntil:t,debugInfo:et(r)})}}var Se=class{#e;constructor(){this.#e=new Map;}add(t){throw new Error("Method not implemented. Use `put` instead.")}addAll(t){throw new Error("Method not implemented. Use `put` instead.")}matchAll(t,r){throw new Error("Method not implemented. Use `match` instead.")}async put(t,r){if(t.method!=="GET")throw new TypeError("Cannot cache response to non-GET request.");if(r.status===206)throw new TypeError("Cannot cache response to a range request (206 Partial Content).");if(r.headers.get("vary")?.includes("*"))throw new TypeError("Cannot cache response with 'Vary: *' header.");this.#e.set(t.url,{body:new Uint8Array(await r.arrayBuffer()),status:r.status,headers:[...r.headers],timestamp:Date.now()});}async match(t){if(t.method!=="GET")return;let r=this.#e.get(t.url);if(!r)return;let{body:n,timestamp:a,...s}=r,o=new Headers(s.headers),i=o.get("cache-control")||o.get("real-cache-control")||"",u=parseInt(i.match(/max-age=(\d+)/)?.[1]||"0",10),p=parseInt(i.match(/stale-while-revalidate=(\d+)/)?.[1]||"0",10),d=(Date.now()-a)/1e3;if(d>u+p){this.#e.delete(t.url);return}let f=d>u;return o.set("cache",f?"STALE":"HIT"),o.set("date",new Date(a).toUTCString()),new Response(n,{status:s.status??200,headers:o})}async delete(t){return this.#e.has(t.url)?(this.#e.delete(t.url),!0):!1}keys(t){let r=[];for(let n of this.#e.keys())(!t||t.url===n)&&r.push(new Request(n));return Promise.resolve(r)}};async function Ft(e){let{storefront:t,request:r,noAdminRedirect:n,response:a=new Response("Not Found",{status:404})}=e,{pathname:s,search:o}=new URL(r.url),i=s+o;if(s==="/admin"&&!n)return redirect(`${t.getShopifyDomain()}/admin`);try{let{urlRedirects:u}=await t.query(Ht,{variables:{query:"path:"+i}}),p=u?.edges?.[0]?.node?.target;if(p)return new Response(null,{status:301,headers:{location:p}});let d=new URLSearchParams(o),c=d.get("return_to")||d.get("redirect");if(c){if($t(r.url,c))return redirect(c);console.warn(`Cross-domain redirects are not supported. Tried to redirect from ${i} to ${c}`);}}catch(u){console.error(`Failed to fetch redirects from Storefront API for route ${i}`,u);}return a}function $t(e,t){try{return new URL(e).origin===new URL(t,e).origin}catch{return !1}}var Ht=`#graphql
  query redirects($query: String) {
    urlRedirects(first: 1, query: $query) {
      edges {
        node {
          target
        }
      }
    }
  }
`;var Qt=async function({context:t}){let r=t?.storefront;if(!r)throw new Error("GraphiQL: Hydrogen's storefront client must be injected in the loader context.");let n=r.getApiUrl(),a=r.getPublicTokenHeaders()["X-Shopify-Storefront-Access-Token"],s="https://avatars.githubusercontent.com/u/12972006?s=48&v=4",o=String.raw;return new Response(o`
      <!DOCTYPE html>
      <html lang="en">
        <head>
          <title>GraphiQL</title>
          <link rel="icon" type="image/x-icon" href="${s}" />
          <style>
            body {
              height: 100%;
              margin: 0;
              width: 100%;
              overflow: hidden;
              background-color: hsl(219, 29%, 18%);
            }

            #graphiql {
              height: 100vh;
            }

            #graphiql > .placeholder {
              color: slategray;
              width: fit-content;
              margin: 40px auto;
              font-family: Arial;
            }
          </style>

          <script
            crossorigin
            src="https://unpkg.com/react@18/umd/react.development.js"
          ></script>
          <script
            crossorigin
            src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
          ></script>
          <link
            rel="stylesheet"
            href="https://unpkg.com/graphiql@3/graphiql.min.css"
          />
          <link
            rel="stylesheet"
            href="https://unpkg.com/@graphiql/plugin-explorer/dist/style.css"
          />
        </head>

        <body>
          <div id="graphiql">
            <div class="placeholder">Loading GraphiQL...</div>
          </div>

          <script
            src="https://unpkg.com/graphiql@3/graphiql.min.js"
            type="application/javascript"
            crossorigin="anonymous"
          ></script>
          <script
            src="https://unpkg.com/@graphiql/plugin-explorer/dist/index.umd.js"
            type="application/javascript"
            crossorigin="anonymous"
          ></script>

          <script>
            const windowUrl = new URL(document.URL);

            let query = '{ shop { name } }';
            if (windowUrl.searchParams.has('query')) {
              query = decodeURIComponent(
                windowUrl.searchParams.get('query') ?? query,
              );
            }

            // Prettify query
            query = GraphiQL.GraphQL.print(GraphiQL.GraphQL.parse(query));

            let variables;
            if (windowUrl.searchParams.has('variables')) {
              variables = decodeURIComponent(
                windowUrl.searchParams.get('variables') ?? '',
              );
            }

            // Prettify variables
            if (variables) {
              variables = JSON.stringify(JSON.parse(variables), null, 2);
            }

            const root = ReactDOM.createRoot(
              document.getElementById('graphiql'),
            );
            root.render(
              React.createElement(GraphiQL, {
                fetcher: GraphiQL.createFetcher({
                  url: '${n}',
                  headers: {
                    'X-Shopify-Storefront-Access-Token': '${a}',
                  },
                }),
                defaultEditorToolsVisibility: true,
                query,
                variables,
                plugins: [GraphiQLPluginExplorer.explorerPlugin()],
              }),
            );
          </script>
        </body>
      </html>
    `,{status:200,headers:{"content-type":"text/html"}})};var w="Error in SEO input: ",K={title:{validate:e=>{if(typeof e!="string")throw new Error(w.concat("`title` should be a string"));if(typeof e=="string"&&e.length>120)throw new Error(w.concat("`title` should not be longer than 120 characters"));return e}},description:{validate:e=>{if(typeof e!="string")throw new Error(w.concat("`description` should be a string"));if(typeof e=="string"&&e.length>155)throw new Error(w.concat("`description` should not be longer than 155 characters"));return e}},url:{validate:e=>{if(typeof e!="string")throw new Error(w.concat("`url` should be a string"));if(typeof e=="string"&&!e.startsWith("http"))throw new Error(w.concat("`url` should be a valid URL"));return e}},handle:{validate:e=>{if(typeof e!="string")throw new Error(w.concat("`handle` should be a string"));if(typeof e=="string"&&!e.startsWith("@"))throw new Error(w.concat("`handle` should start with `@`"));return e}}};function rt(e){let t=[];for(let r of Object.keys(e))switch(r){case"title":{let n=z(K.title,e.title),a=Gt(e?.titleTemplate,n);if(!a)break;t.push(T("title",{title:a}),T("meta",{property:"og:title",content:a}),T("meta",{name:"twitter:title",content:a}));break}case"description":{let n=z(K.description,e.description);if(!n)break;t.push(T("meta",{name:"description",content:n}),T("meta",{property:"og:description",content:n}),T("meta",{name:"twitter:description",content:n}));break}case"url":{let n=z(K.url,e.url);if(!n)break;let a=n.split("?")[0];t.push(T("link",{rel:"canonical",href:a}),T("meta",{property:"og:url",content:a}));break}case"handle":{let n=z(K.handle,e.handle);if(!n)break;t.push(T("meta",{name:"twitter:site",content:n}),T("meta",{name:"twitter:creator",content:n}));break}case"media":{let n,a=Ie(e.media);for(let s of a)if(typeof s=="string"&&t.push(T("meta",{name:"og:image",content:s})),s&&typeof s=="object"){let o=s.type||"image",i=s?{url:s?.url,secure_url:s?.url,type:Vt(s.url),width:s?.width,height:s?.height,alt:s?.altText}:{};for(let u of Object.keys(i))i[u]&&(n=i[u],t.push(T("meta",{property:`og:${o}:${u}`,content:n},i.url)));}break}case"jsonLd":{let n=Ie(e.jsonLd),a=0;for(let s of n){if(typeof s!="object")continue;let o=T("script",{type:"application/ld+json",children:JSON.stringify(s)},`json-ld-${s?.["@type"]||s?.name||a++}`);t.push(o);}break}case"alternates":{let n=Ie(e.alternates);for(let a of n){if(!a)continue;let{language:s,url:o,default:i}=a,u=s?`${s}${i?"-default":""}`:void 0;t.push(T("link",{rel:"alternate",hrefLang:u,href:o}));}break}case"robots":{if(!e.robots)break;let{maxImagePreview:n,maxSnippet:a,maxVideoPreview:s,noArchive:o,noFollow:i,noImageIndex:u,noIndex:p,noSnippet:d,noTranslate:c,unavailableAfter:f}=e.robots,l=[o&&"noarchive",u&&"noimageindex",d&&"nosnippet",c&&"notranslate",n&&`max-image-preview:${n}`,a&&`max-snippet:${a}`,s&&`max-video-preview:${s}`,f&&`unavailable_after:${f}`],h=(p?"noindex":"index")+","+(i?"nofollow":"follow");for(let g of l)g&&(h+=`,${g}`);t.push(T("meta",{name:"robots",content:h}));break}}return t.flat().sort((r,n)=>r.key.localeCompare(n.key))}function T(e,t,r){let n={tag:e,props:{},key:""};return e==="title"?(n.children=t.title,n.key=Re(n),n):e==="script"?(n.children=typeof t.children=="string"?t.children:"",n.key=Re(n,r),delete t.children,n.props=t,n):(n.props=t,Object.keys(n.props).forEach(a=>!n.props[a]&&delete n.props[a]),n.key=Re(n,r),n)}function Re(e,t){let{tag:r,props:n}=e;if(r==="title")return "0-title";if(r==="meta"){let a=n.content===t&&typeof n.property=="string"&&!n.property.endsWith("secure_url")&&"0";return [r,...[t,a],n.property||n.name].filter(o=>o).join("-")}return r==="link"?[r,n.rel,n.hrefLang||n.media].filter(s=>s).join("-").replace(/\s+/g,"-"):r==="script"?`${r}-${t}`:`${r}-${n.type}`}function Gt(e,t){if(t)return e?typeof e=="function"?e(t):e.replace("%s",t??""):t}function Vt(e){switch(e&&e.split(".").pop()){case"svg":return "image/svg+xml";case"png":return "image/png";case"gif":return "image/gif";case"swf":return "application/x-shockwave-flash";case"mp3":return "audio/mpeg";case"jpg":case"jpeg":default:return "image/jpeg"}}function Ie(e){return Array.isArray(e)?e:[e]}function z(e,t){try{return e.validate(t)}catch(r){return console.warn(r.message),t}}var Jt=lazy(()=>import('./log-seo-tags-TY72EQWZ.js'));function Yt({debug:e}){let t=useMatches(),r=useLocation(),n=useMemo(()=>t.flatMap(o=>{let{handle:i,...u}=o,p={...u,...r},d=i?.seo,c=u?.data?.seo;return !d&&!c?[]:d?J(d,p):[c]}).reduce((o,i)=>{Object.keys(i).forEach(p=>!i[p]&&delete i[p]);let{jsonLd:u}=i;return u?o?.jsonLd?Array.isArray(u)?{...o,...i,jsonLd:[...o.jsonLd,...u]}:{...o,...i,jsonLd:[...o.jsonLd,u]}:{...o,...i,jsonLd:[u]}:{...o,...i}},{}),[t,r]),{html:a,loggerMarkup:s}=useMemo(()=>{let o=rt(n),i=o.map(p=>p.tag==="script"?createElement(p.tag,{...p.props,key:p.key,dangerouslySetInnerHTML:{__html:p.children}}):createElement(p.tag,{...p.props,key:p.key},p.children)),u=createElement(Suspense,{fallback:null},createElement(Jt,{headTags:o}));return {html:i,loggerMarkup:u}},[n]);return createElement(Fragment,null,a,e&&s)}function J(e,...t){if(e instanceof Function)return J(e(...t),...t);let r={};return Array.isArray(e)?(r=e.reduce((n,a)=>[...n,J(a)],[]),r):e instanceof Object?(Object.entries(e).forEach(([a,s])=>{r[a]=J(s,...t);}),r):e}function rr({connection:e,children:t=()=>(console.warn("<Pagination> requires children to work properly"),null)}){let n=useNavigation().state==="loading",{endCursor:a,hasNextPage:s,hasPreviousPage:o,nextPageUrl:i,nodes:u,previousPageUrl:p,startCursor:d}=nr(e),c=useMemo(()=>({pageInfo:{endCursor:a,hasPreviousPage:o,hasNextPage:s,startCursor:d},nodes:u}),[a,s,o,d,u]),f=useMemo(()=>forwardRef(function(g,y){return s?createElement(Link,{preventScrollReset:!0,...g,to:i,state:c,replace:!0,ref:y}):null}),[s,i,c]),l=useMemo(()=>forwardRef(function(g,y){return o?createElement(Link,{preventScrollReset:!0,...g,to:p,state:c,replace:!0,ref:y}):null}),[o,p,c]);return t({state:c,hasNextPage:s,hasPreviousPage:o,isLoading:n,nextPageUrl:i,nodes:u,previousPageUrl:p,NextLink:f,PreviousLink:l})}function Y(e){let t=new URLSearchParams(e);return t.delete("cursor"),t.delete("direction"),t.toString()}function q(e){throw new Error(`The Pagination component requires ${"`"+e+"`"} to be a part of your query. See the guide on how to setup your query to include ${"`"+e+"`"}: https://shopify.dev/docs/custom-storefronts/hydrogen/data-fetching/pagination#setup-the-paginated-query`)}function nr(e){e.pageInfo||q("pageInfo"),typeof e.pageInfo.startCursor>"u"&&q("pageInfo.startCursor"),typeof e.pageInfo.endCursor>"u"&&q("pageInfo.endCursor"),typeof e.pageInfo.hasNextPage>"u"&&q("pageInfo.hasNextPage"),typeof e.pageInfo.hasPreviousPage>"u"&&q("pageInfo.hasPreviousPage");let t=useNavigate(),{state:r,search:n,pathname:a}=useLocation(),i=new URLSearchParams(n).get("direction")==="previous",u=useMemo(()=>!globalThis?.window?.__hydrogenHydrated||!r||!r?.nodes?flattenConnection(e):i?[...flattenConnection(e),...r.nodes]:[...r.nodes,...flattenConnection(e)],[r,e]),p=useMemo(()=>{let l=globalThis?.window?.__hydrogenHydrated,h=!l||r?.pageInfo?.startCursor===void 0?e.pageInfo.startCursor:r.pageInfo.startCursor,g=!l||r?.pageInfo?.endCursor===void 0?e.pageInfo.endCursor:r.pageInfo.endCursor,y=!l||r?.pageInfo?.hasPreviousPage===void 0?e.pageInfo.hasPreviousPage:r.pageInfo.hasPreviousPage,m=!l||r?.pageInfo?.hasNextPage===void 0?e.pageInfo.hasNextPage:r.pageInfo.hasNextPage;return r?.nodes&&(i?(h=e.pageInfo.startCursor,y=e.pageInfo.hasPreviousPage):(g=e.pageInfo.endCursor,m=e.pageInfo.hasNextPage)),{startCursor:h,endCursor:g,hasPreviousPage:y,hasNextPage:m}},[i,r,e.pageInfo.hasNextPage,e.pageInfo.hasPreviousPage,e.pageInfo.startCursor,e.pageInfo.endCursor]),d=useRef({params:Y(n),pathname:a});useEffect(()=>{window.__hydrogenHydrated=!0;},[]),useEffect(()=>{(Y(n)!==d.current.params||a!==d.current.pathname)&&(d.current={pathname:a,params:Y(n)},t(`${a}?${Y(n)}`,{replace:!0,preventScrollReset:!0,state:{nodes:void 0,pageInfo:void 0}}));},[a,n]);let c=useMemo(()=>{let l=new URLSearchParams(n);return l.set("direction","previous"),p.startCursor&&l.set("cursor",p.startCursor),`?${l.toString()}`},[n,p.startCursor]),f=useMemo(()=>{let l=new URLSearchParams(n);return l.set("direction","next"),p.endCursor&&l.set("cursor",p.endCursor),`?${l.toString()}`},[n,p.endCursor]);return {...p,previousPageUrl:c,nextPageUrl:f,nodes:u}}function ar(e,t={pageBy:20}){if(typeof e?.url>"u")throw new Error("getPaginationVariables must be called with the Request object passed to your loader function");let{pageBy:r}=t,n=new URLSearchParams(new URL(e.url).search),a=n.get("cursor")??void 0;return (n.get("direction")==="previous"?"previous":"next")==="previous"?{last:r,startCursor:a??null}:{first:r,endCursor:a??null}}var x=class extends Response{constructor(t,r){super(`Bad request: ${t}`,{status:400});}};var F=`Shopify Hydrogen ${N}`,or="30243aa5-17c1-465a-8493-944bcc4e88aa";function X(e,t={}){let r=t.headers?new Headers(t.headers):new Headers({});return r.set("location",e),new Response(null,{status:t.status||302,headers:r})}async function sr({session:e,customerAccountId:t,customerAccountUrl:r,origin:n}){let a=new URLSearchParams,s=e.get("refresh_token");if(!s)throw new x("Unauthorized","No refresh_token in the session. Make sure your session is configured correctly and passed to `createCustomerClient`.");a.append("grant_type","refresh_token"),a.append("refresh_token",s),a.append("client_id",t);let o={"content-type":"application/x-www-form-urlencoded","User-Agent":F,Origin:n},i=await fetch(`${r}/auth/oauth/token`,{method:"POST",headers:o,body:a});if(!i.ok){let l=await i.text();throw new Response(l,{status:i.status,headers:{"Content-Type":"text/html; charset=utf-8"}})}let{access_token:u,expires_in:p,id_token:d,refresh_token:c}=await i.json();e.set("customer_authorization_code_token",u),e.set("expires_at",new Date(new Date().getTime()+(p-120)*1e3).getTime()+""),e.set("id_token",d),e.set("refresh_token",c);let f=await Ae(e,t,r,n);e.set("customer_access_token",f);}function $(e){e.unset("code-verifier"),e.unset("customer_authorization_code_token"),e.unset("expires_at"),e.unset("id_token"),e.unset("refresh_token"),e.unset("customer_access_token"),e.unset("state"),e.unset("nonce");}async function xe({locks:e,expiresAt:t,session:r,customerAccountId:n,customerAccountUrl:a,origin:s}){if(parseInt(t,10)-1e3<new Date().getTime())try{e.refresh||(e.refresh=sr({session:r,customerAccountId:n,customerAccountUrl:a,origin:s})),await e.refresh,delete e.refresh;}catch(o){throw $(r),o&&o.status!==401?o:new x("Unauthorized","Login before querying the Customer Account API.")}}async function ct(){let e=ir();return pt(e)}async function ut(e){let t=await crypto.subtle.digest({name:"SHA-256"},new TextEncoder().encode(e)),r=cr(t);return pt(r)}function ir(){let e=new Uint8Array(32);return crypto.getRandomValues(e),String.fromCharCode.apply(null,Array.from(e))}function pt(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function cr(e){let t=new Uint8Array(e),r=Array.from(t);return String.fromCharCode(...r)}async function dt(){let e=Date.now().toString(),t=Math.random().toString(36).substring(2);return e+t}async function Ae(e,t,r,n){let a=t,s=e.get("customer_authorization_code_token");if(!s)throw new x("Unauthorized","No access token found in the session. Make sure your session is configured correctly and passed to `createCustomerClient`.");let o=new URLSearchParams;o.append("grant_type","urn:ietf:params:oauth:grant-type:token-exchange"),o.append("client_id",a),o.append("audience",or),o.append("subject_token",s),o.append("subject_token_type","urn:ietf:params:oauth:token-type:access_token"),o.append("scopes","https://api.customers.com/auth/customer.graphql");let i={"content-type":"application/x-www-form-urlencoded","User-Agent":F,Origin:n},p=await(await fetch(`${r}/auth/oauth/token`,{method:"POST",headers:i,body:o})).json();if(p.error)throw new x(p.error_description);return p.access_token}function lt(e){return ur(e).payload.nonce}function ur(e){let[t,r,n]=e.split("."),a=JSON.parse(atob(t)),s=JSON.parse(atob(r));return {header:a,payload:s,signature:n}}function Z(){return dr(pr())}function pr(){try{return crypto.getRandomValues(new Uint8Array(16))}catch{return new Uint8Array(16).map(()=>Math.random()*255|0)}}function dr(e){return Array.from(e,function(t){return ("0"+(t&255).toString(16)).slice(-2)}).join("")}var we="2024-01";function lr({session:e,customerAccountId:t,customerAccountUrl:r,customerApiVersion:n=we,request:a,waitUntil:s}){if(n!==we&&console.log(`[h2:warn:createCustomerClient] You are using Customer Account API version ${n} when this version of Hydrogen was built for ${we}.`),!a?.url)throw new Error("[h2:error:createCustomerClient] The request object does not contain a URL.");let o=new URL(a.url),i=o.protocol==="http:"?o.origin.replace("http","https"):o.origin,u={},p=void 0;async function d({query:c,type:f,variables:l={}}){let h=e.get("customer_access_token"),g=e.get("expires_at");if(!h||!g)throw new x("Unauthorized","Login before querying the Customer Account API.");await xe({locks:u,expiresAt:g,session:e,customerAccountId:t,customerAccountUrl:r,origin:i});new Date().getTime();let m=await fetch(`${r}/account/customer/api/${n}/graphql`,{method:"POST",headers:{"Content-Type":"application/json","User-Agent":F,Origin:i,Authorization:h},body:JSON.stringify({operationName:"SomeQuery",query:c,variables:l})});let C=await m.text(),A={response:m,type:f,query:c,queryVariables:l,errors:void 0,client:"customer"};if(!m.ok){let I;try{I=P(C);}catch{I=[{message:C}];}L({...A,errors:I});}try{return P(C)}catch{L({...A,errors:[{message:C}]});}}return {login:async()=>{let c=new URL(r+"/auth/oauth/authorize"),f=await dt(),l=await Z();c.searchParams.set("client_id",t),c.searchParams.set("scope","openid email"),c.searchParams.append("response_type","code"),c.searchParams.append("redirect_uri",i+"/authorize"),c.searchParams.set("scope","openid email https://api.customers.com/auth/customer.graphql"),c.searchParams.append("state",f),c.searchParams.append("nonce",l);let h=await ct(),g=await ut(h);return e.set("code-verifier",h),e.set("state",f),e.set("nonce",l),c.searchParams.append("code_challenge",g),c.searchParams.append("code_challenge_method","S256"),X(c.toString(),{headers:{"Set-Cookie":await e.commit()}})},logout:async()=>{let c=e.get("id_token");return $(e),X(`${r}/auth/logout?id_token_hint=${c}`,{status:302,headers:{"Set-Cookie":await e.commit()}})},isLoggedIn:async()=>{let c=e.get("expires_at");if(!e.get("customer_access_token")||!c)return !1;let f=new Date().getTime();try{await xe({locks:u,expiresAt:c,session:e,customerAccountId:t,customerAccountUrl:r,origin:i}),p?.(" check expires",f);}catch{return !1}return !0},mutate(c,f){return c=U(c),W(c,"customer.mutate"),d({query:c,type:"mutation",...f})},query(c,f){return c=U(c),j(c,"customer.query"),d({query:c,type:"query",...f})},authorize:async(c="/")=>{let f=o.searchParams.get("code"),l=o.searchParams.get("state");if(!f||!l)throw $(e),new x("Unauthorized","No code or state parameter found in the redirect URL.");if(e.get("state")!==l)throw $(e),new x("Unauthorized","The session state does not match the state parameter. Make sure that the session is configured correctly and passed to `createCustomerClient`.");let h=t,g=new URLSearchParams;g.append("grant_type","authorization_code"),g.append("client_id",h),g.append("redirect_uri",i+"/authorize"),g.append("code",f);let y=e.get("code-verifier");if(!y)throw new x("Unauthorized","No code verifier found in the session. Make sure that the session is configured correctly and passed to `createCustomerClient`.");g.append("code_verifier",y);let m={"content-type":"application/x-www-form-urlencoded","User-Agent":F,Origin:i},C=await fetch(`${r}/auth/oauth/token`,{method:"POST",headers:m,body:g});if(!C.ok)throw new Response(await C.text(),{status:C.status,headers:{"Content-Type":"text/html; charset=utf-8"}});let{access_token:A,expires_in:I,id_token:M,refresh_token:te}=await C.json(),O=e.get("nonce"),v=await lt(M);if(O!==v)throw new x("Unauthorized",`Returned nonce does not match: ${O} !== ${v}`);e.set("customer_authorization_code_token",A),e.set("expires_at",new Date(new Date().getTime()+(I-120)*1e3).getTime()+""),e.set("id_token",M),e.set("refresh_token",te);let H=await Ae(e,t,r,i);return e.set("customer_access_token",H),X(c,{headers:{"Set-Cookie":await e.commit()}})}}}var yr="https://raw.githubusercontent.com/Shopify/hydrogen/main/docs/changelog.json";async function fr({request:e,changelogUrl:t}){new URL(e.url).searchParams;return fetch(t||yr)}var yt="cartFormInput";function ee({children:e,action:t,inputs:r,route:n}){let a=useFetcher();return jsxs(a.Form,{action:n||"",method:"post",children:[(t||r)&&jsx("input",{type:"hidden",name:yt,value:JSON.stringify({action:t,inputs:r})}),typeof e=="function"?e(a):e]})}ee.INPUT_NAME=yt;ee.ACTIONS={AttributesUpdateInput:"AttributesUpdateInput",BuyerIdentityUpdate:"BuyerIdentityUpdate",Create:"Create",DiscountCodesUpdate:"DiscountCodesUpdate",LinesAdd:"LinesAdd",LinesRemove:"LinesRemove",LinesUpdate:"LinesUpdate",NoteUpdate:"NoteUpdate",SelectedDeliveryOptionsUpdate:"SelectedDeliveryOptionsUpdate",MetafieldsSet:"MetafieldsSet",MetafieldDelete:"MetafieldDelete"};function mr(e){let t={};for(let o of e.entries()){let i=o[0],u=e.getAll(i);t[i]=u.length>1?u:o[1];}let{cartFormInput:r,...n}=t,{action:a,inputs:s}=r?JSON.parse(String(r)):{};return {action:a,inputs:{...s,...n}}}ee.getFormInput=mr;var S=`#graphql
  fragment CartApiError on CartUserError {
    message
    field
    code
  }
`,R=`#graphql
  fragment CartApiMutation on Cart {
    id
    totalQuantity
  }
`;function Oe(e){return async(t,r)=>{let{cartId:n,...a}=r||{},{cartCreate:s}=await e.storefront.mutate(Sr(e.cartFragment),{variables:{input:t,...a}});return s}}var Sr=(e=R)=>`#graphql
  mutation cartCreate(
    $input: CartInput!
    $country: CountryCode = ZZ
    $language: LanguageCode
  ) @inContext(country: $country, language: $language) {
    cartCreate(input: $input) {
      cart {
        ...CartApiMutation
        checkoutUrl
      }
      errors: userErrors {
        ...CartApiError
      }
    }
  }
  ${e}
  ${S}
`;function Pe(e){return async t=>{let r=e.getCartId();if(!r)return null;let{cart:n}=await e.storefront.query(Rr(e.cartFragment),{variables:{cartId:r,...t},cache:e.storefront.CacheNone()});return n}}var Rr=(e=Ir)=>`#graphql
  query CartQuery(
    $cartId: ID!
    $numCartLines: Int = 100
    $country: CountryCode = ZZ
    $language: LanguageCode
  ) @inContext(country: $country, language: $language) {
    cart(id: $cartId) {
      ...CartApiQuery
    }
  }

  ${e}
`,Ir=`#graphql
  fragment CartApiQuery on Cart {
    id
    checkoutUrl
    totalQuantity
    buyerIdentity {
      countryCode
      customer {
        id
        email
        firstName
        lastName
        displayName
      }
      email
      phone
    }
    lines(first: $numCartLines) {
      edges {
        node {
          id
          quantity
          attributes {
            key
            value
          }
          cost {
            totalAmount {
              amount
              currencyCode
            }
            amountPerQuantity {
              amount
              currencyCode
            }
            compareAtAmountPerQuantity {
              amount
              currencyCode
            }
          }
          merchandise {
            ... on ProductVariant {
              id
              availableForSale
              compareAtPrice {
                ...CartApiMoney
              }
              price {
                ...CartApiMoney
              }
              requiresShipping
              title
              image {
                ...CartApiImage
              }
              product {
                handle
                title
                id
              }
              selectedOptions {
                name
                value
              }
            }
          }
        }
      }
    }
    cost {
      subtotalAmount {
        ...CartApiMoney
      }
      totalAmount {
        ...CartApiMoney
      }
      totalDutyAmount {
        ...CartApiMoney
      }
      totalTaxAmount {
        ...CartApiMoney
      }
    }
    note
    attributes {
      key
      value
    }
    discountCodes {
      applicable
      code
    }
  }

  fragment CartApiMoney on MoneyV2 {
    currencyCode
    amount
  }

  fragment CartApiImage on Image {
    id
    url
    altText
    width
    height
  }
`;function be(e){return async(t,r)=>{let{cartLinesAdd:n}=await e.storefront.mutate(Tr(e.cartFragment),{variables:{cartId:e.getCartId(),lines:t,...r}});return n}}var Tr=(e=R)=>`#graphql
  mutation cartLinesAdd(
    $cartId: ID!
    $lines: [CartLineInput!]!
    $country: CountryCode = ZZ
    $language: LanguageCode
  ) @inContext(country: $country, language: $language) {
    cartLinesAdd(cartId: $cartId, lines: $lines) {
      cart {
        ...CartApiMutation
      }
      errors: userErrors {
        ...CartApiError
      }
    }
  }

  ${e}
  ${S}
`;function De(e){return async(t,r)=>{let{cartLinesUpdate:n}=await e.storefront.mutate(xr(e.cartFragment),{variables:{cartId:e.getCartId(),lines:t,...r}});return n}}var xr=(e=R)=>`#graphql
  mutation cartLinesUpdate(
    $cartId: ID!
    $lines: [CartLineUpdateInput!]!
    $language: LanguageCode
    $country: CountryCode
  ) @inContext(country: $country, language: $language) {
    cartLinesUpdate(cartId: $cartId, lines: $lines) {
      cart {
        ...CartApiMutation
      }
      errors: userErrors {
        ...CartApiError
      }
    }
  }

  ${e}
  ${S}
`;function Ee(e){return async(t,r)=>{let{cartLinesRemove:n}=await e.storefront.mutate(Ar(e.cartFragment),{variables:{cartId:e.getCartId(),lineIds:t,...r}});return n}}var Ar=(e=R)=>`#graphql
  mutation cartLinesRemove(
    $cartId: ID!
    $lineIds: [ID!]!
    $language: LanguageCode
    $country: CountryCode
  ) @inContext(country: $country, language: $language) {
    cartLinesRemove(cartId: $cartId, lineIds: $lineIds) {
      cart {
        ...CartApiMutation
      }
      errors: userErrors {
        ...CartApiError
      }
    }
  }

  ${e}
  ${S}
`;function Ue(e){return async(t,r)=>{let n=t.filter((s,o,i)=>i.indexOf(s)===o),{cartDiscountCodesUpdate:a}=await e.storefront.mutate(wr(e.cartFragment),{variables:{cartId:e.getCartId(),discountCodes:n,...r}});return a}}var wr=(e=R)=>`#graphql
  mutation cartDiscountCodesUpdate(
    $cartId: ID!
    $discountCodes: [String!]
    $language: LanguageCode
    $country: CountryCode
  ) @inContext(country: $country, language: $language) {
    cartDiscountCodesUpdate(cartId: $cartId, discountCodes: $discountCodes) {
      cart {
        ...CartApiMutation
      }
      errors: userErrors {
        ...CartApiError
      }
    }
  }
  ${e}
  ${S}
`;function Le(e){return async(t,r)=>{let{cartBuyerIdentityUpdate:n}=await e.storefront.mutate(Or(e.cartFragment),{variables:{cartId:e.getCartId(),buyerIdentity:t,...r}});return n}}var Or=(e=R)=>`#graphql
  mutation cartBuyerIdentityUpdate(
    $cartId: ID!
    $buyerIdentity: CartBuyerIdentityInput!
    $language: LanguageCode
    $country: CountryCode
  ) @inContext(country: $country, language: $language) {
    cartBuyerIdentityUpdate(cartId: $cartId, buyerIdentity: $buyerIdentity) {
      cart {
        ...CartApiMutation
      }
      errors: userErrors {
        ...CartApiError
      }
    }
  }
  ${e}
  ${S}
`;function Me(e){return async(t,r)=>{let{cartNoteUpdate:n}=await e.storefront.mutate(Pr(e.cartFragment),{variables:{cartId:e.getCartId(),note:t,...r}});return n}}var Pr=(e=R)=>`#graphql
  mutation cartNoteUpdate(
    $cartId: ID!
    $note: String
    $language: LanguageCode
    $country: CountryCode
  ) @inContext(country: $country, language: $language) {
    cartNoteUpdate(cartId: $cartId, note: $note) {
      cart {
        ...CartApiMutation
      }
      errors: userErrors {
        ...CartApiError
      }
    }
  }
  ${e}
  ${S}
`;function ve(e){return async(t,r)=>{let{cartSelectedDeliveryOptionsUpdate:n}=await e.storefront.mutate(br(e.cartFragment),{variables:{cartId:e.getCartId(),selectedDeliveryOptions:t,...r}});return n}}var br=(e=R)=>`#graphql
  mutation cartSelectedDeliveryOptionsUpdate(
    $cartId: ID!
    $selectedDeliveryOptions: [CartSelectedDeliveryOptionInput!]!
    $language: LanguageCode
    $country: CountryCode
  ) @inContext(country: $country, language: $language) {
    cartSelectedDeliveryOptionsUpdate(cartId: $cartId, selectedDeliveryOptions: $selectedDeliveryOptions) {
      cart {
        ...CartApiMutation
      }
      errors: userErrors {
        ...CartApiError
      }
    }
  }
  ${e}
  ${S}
`;function _e(e){return async(t,r)=>{let{cartAttributesUpdate:n}=await e.storefront.mutate(Dr(e.cartFragment),{variables:{cartId:r?.cartId||e.getCartId(),attributes:t}});return n}}var Dr=(e=R)=>`#graphql
  mutation cartAttributesUpdate(
    $cartId: ID!
    $attributes: [AttributeInput!]!
  ) {
    cartAttributesUpdate(cartId: $cartId, attributes: $attributes) {
      cart {
        ...CartApiMutation
      }
      errors: userErrors {
        ...CartApiError
      }
    }
  }
  ${e}
  ${S}
`;function Ne(e){return async(t,r)=>{let n=r?.cartId||e.getCartId(),a=t.map(o=>({...o,ownerId:n})),{cartMetafieldsSet:s}=await e.storefront.mutate(Er(),{variables:{metafields:a}});return {cart:{id:n},errors:s.errors}}}var Er=()=>`#graphql
  mutation cartMetafieldsSet(
    $metafields: [CartMetafieldsSetInput!]!
    $language: LanguageCode
    $country: CountryCode
  ) @inContext(country: $country, language: $language) {
    cartMetafieldsSet(metafields: $metafields) {
      errors: userErrors {
        code
        elementIndex
        field
        message
      }
    }
  }
`;function ke(e){return async(t,r)=>{let n=r?.cartId||e.getCartId(),{cartMetafieldDelete:a}=await e.storefront.mutate(Ur(),{variables:{input:{ownerId:n,key:t}}});return {cart:{id:n},errors:a.errors}}}var Ur=()=>`#graphql
  mutation cartMetafieldDelete(
    $input: CartMetafieldDeleteInput!
  ) {
    cartMetafieldDelete(input: $input) {
      errors: userErrors {
        code
        field
        message
      }
    }
  }
`;var Lr=new Set(["domain","path","max-age","expires","samesite","secure","httponly"]);function ft(e){let t={},r,n,a=0,s=e.split(/;\s*/g),o,i;for(;a<s.length;a++)if(n=s[a],r=n.indexOf("="),~r){if(o=n.substring(0,r++).trim(),i=n.substring(r).trim(),i[0]==='"'&&(i=i.substring(1,i.length-1)),~i.indexOf("%"))try{i=decodeURIComponent(i);}catch{}Lr.has(n=o.toLowerCase())?n==="expires"?t.expires=new Date(i):n==="max-age"?t.maxage=+i:t[n]=i:t[o]=i;}else (o=n.trim().toLowerCase())&&(o==="httponly"||o==="secure")&&(t[o]=!0);return t}function gt(e,t,r={}){let n=e+"="+encodeURIComponent(t);return r.expires&&(n+="; Expires="+new Date(r.expires).toUTCString()),r.maxage!=null&&r.maxage>=0&&(n+="; Max-Age="+(r.maxage|0)),r.domain&&(n+="; Domain="+r.domain),r.path&&(n+="; Path="+r.path),r.samesite&&(n+="; SameSite="+r.samesite),(r.secure||r.samesite==="None")&&(n+="; Secure"),r.httponly&&(n+="; HttpOnly"),n}var Mr=e=>{let t=ft(e.get("Cookie")||"");return ()=>t.cart?`gid://shopify/Cart/${t.cart}`:void 0};var vr=e=>t=>{let r=new Headers;return r.append("Set-Cookie",gt("cart",t.split("/").pop()||"",{path:"/",...e})),r};function _r(e){let{getCartId:t,setCartId:r,storefront:n,cartQueryFragment:a,cartMutateFragment:s}=e,o={storefront:n,getCartId:t,cartFragment:s},i=t(),u=Oe(o),p={get:Pe({storefront:n,getCartId:t,cartFragment:a}),getCartId:t,setCartId:r,create:u,addLines:async(d,c)=>i||c?.cartId?await be(o)(d,c):await u({lines:d},c),updateLines:De(o),removeLines:Ee(o),updateDiscountCodes:async(d,c)=>i||c?.cartId?await Ue(o)(d,c):await u({discountCodes:d},c),updateBuyerIdentity:async(d,c)=>i||c?.cartId?await Le(o)(d,c):await u({buyerIdentity:d},c),updateNote:async(d,c)=>i||c?.cartId?await Me(o)(d,c):await u({note:d},c),updateSelectedDeliveryOption:ve(o),updateAttributes:async(d,c)=>i||c?.cartId?await _e(o)(d,c):await u({attributes:d},c),setMetafields:async(d,c)=>i||c?.cartId?await Ne(o)(d,c):await u({metafields:d},c),deleteMetafield:ke(o)};return "customMethods"in e?{...p,...e.customMethods??{}}:p}function $r({handle:e,options:t=[],variants:r=[],productPath:n="products",children:a}){let s=r instanceof Array?r:flattenConnection(r),{searchParams:o,path:i,alreadyOnProductPage:u}=Qr(e,n),p=t.filter(d=>d?.values?.length===1);return createElement(Fragment,null,...useMemo(()=>t.filter(d=>d?.values?.length>1).map(d=>{let c,f=[];for(let l of d.values){let h=new URLSearchParams(u?o:void 0);h.set(d.name,l),p.forEach(A=>{h.set(A.name,A.values[0]);});let g=s.find(A=>A?.selectedOptions?.every(I=>h.get(I?.name)===I?.value)),y=o.get(d.name),m=y?y===l:!1;m&&(c=l);let C="?"+h.toString();f.push({value:l,isAvailable:g?g.availableForSale:!0,to:i+C,search:C,isActive:m});}return a({option:{name:d.name,value:c,values:f}})}),[t,s,a]))}var Hr=e=>{if(typeof e?.url>"u")throw new TypeError(`Expected a Request instance, got ${typeof e}`);let t=new URL(e.url).searchParams,r=[];return t.forEach((n,a)=>{r.push({name:a,value:n});}),r};function Qr(e,t){let{pathname:r,search:n}=useLocation();return useMemo(()=>{let a=/(\/[a-zA-Z]{2}-[a-zA-Z]{2}\/)/g.exec(r),s=a&&a.length>0;t=t.startsWith("/")?t.substring(1):t;let o=s?`${a[0]}${t}/${e}`:`/${t}/${e}`;return {searchParams:new URLSearchParams(n),alreadyOnProductPage:o===r,path:o}},[r,n,e,t])}var ht=createContext(void 0),Wr=ht.Provider,qe=()=>useContext(ht);function Kr(e={}){let t=Z(),r=zr(t,e);return {nonce:t,header:r,NonceProvider:({children:a})=>createElement(Wr,{value:t},a)}}function zr(e,t={}){let r=`'nonce-${e}'`,i=Object.assign({},{baseUri:["'self'"],defaultSrc:["'self'",r,"https://cdn.shopify.com","https://shopify.com"],frameAncestors:["none"],styleSrc:["'self'","'unsafe-inline'","https://cdn.shopify.com"],connectSrc:["'self'","https://monorail-edge.shopifysvc.com"]},t);return i.scriptSrc instanceof Array&&!i.scriptSrc.includes(r)?i.scriptSrc.push(r):i.defaultSrc instanceof Array&&!i.defaultSrc.includes(r)&&i.defaultSrc.push(r),jr({directives:i})}var Yr=forwardRef((e,t)=>{let r=qe();return jsx("script",{suppressHydrationWarning:!0,...e,nonce:r,ref:t})});function en(e){let t=useFetchers(),r={};for(let{formData:n}of t)if(n?.get("optimistic-identifier")===e)try{if(n.has("optimistic-data")){let a=JSON.parse(String(n.get("optimistic-data")));Object.assign(r,a);}}catch{}return r}function tn({id:e,data:t}){return jsxs(Fragment$1,{children:[jsx("input",{type:"hidden",name:"optimistic-identifier",value:e}),jsx("input",{type:"hidden",name:"optimistic-data",value:JSON.stringify(t)})]})}function on(e){return jsx(ShopPayButton,{channel:"hydrogen",...e})}//! @see: https://shopify.dev/docs/api/storefront/latest/mutations/cartCreate
//! @see https://shopify.dev/docs/api/storefront/latest/queries/cart
//! @see: https://shopify.dev/docs/api/storefront/latest/mutations/cartLinesAdd
//! @see: https://shopify.dev/docs/api/storefront/latest/mutations/cartLinesUpdate
//! @see: https://shopify.dev/docs/api/storefront/latest/mutations/cartLinesRemove
//! @see https://shopify.dev/docs/api/storefront/latest/mutations/cartDiscountCodesUpdate
//! @see https://shopify.dev/docs/api/storefront/latest/mutations/cartBuyerIdentityUpdate
//! @see https://shopify.dev/docs/api/storefront/latest/mutations/cartNoteUpdate
//! @see https://shopify.dev/docs/api/storefront/latest/mutations/cartSelectedDeliveryOptionsUpdate
//! @see https://shopify.dev/docs/api/storefront/latest/mutations/cartMetafieldsSet
//! @see https://shopify.dev/docs/api/storefront/2023-10/mutations/cartMetafieldDelete

export { ce as CacheCustom, ie as CacheLong, oe as CacheNone, D as CacheShort, ee as CartForm, Se as InMemoryCache, tn as OptimisticInput, rr as Pagination, Yr as Script, Yt as Seo, on as ShopPayButton, Xe as StorefrontApiError, $r as VariantSelector, _e as cartAttributesUpdateDefault, Le as cartBuyerIdentityUpdateDefault, Oe as cartCreateDefault, Ue as cartDiscountCodesUpdateDefault, Pe as cartGetDefault, Mr as cartGetIdDefault, be as cartLinesAddDefault, Ee as cartLinesRemoveDefault, De as cartLinesUpdateDefault, ke as cartMetafieldDeleteDefault, Ne as cartMetafieldsSetDefault, Me as cartNoteUpdateDefault, ve as cartSelectedDeliveryOptionsUpdateDefault, vr as cartSetIdDefault, fr as changelogHandler, _r as createCartHandler, Kr as createContentSecurityPolicy, lr as createCustomerClient__unstable, Nn as createStorefrontClient, Qn as createWithCache, _ as generateCacheControlHeader, ar as getPaginationVariables, Hr as getSelectedProductOptions, Qt as graphiqlLoader, kt as isStorefrontApiError, Ft as storefrontRedirect, qe as useNonce, en as useOptimisticData };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.js.map